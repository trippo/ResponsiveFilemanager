{"version":3,"sources":["include.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"include.js","sourcesContent":["var version = \"9.9.0\";\nvar active_contextmenu = true;\nvar copy_count=0;\n$(document).ready(function(){\n\t// Right click menu\n    if (active_contextmenu) {\n\t$.contextMenu({\n\t    selector:'figure:not(.back-directory), .list-view2 figure:not(.back-directory)',\n\t    autoHide:true,\n\t    build: function($trigger) {\n\t\t$trigger.addClass('selected');\n\t\tvar options = {\n\t\t  callback: function(key, options) {\n\t\t    switch (key) {\n\t\t\t\t\tcase \"copy_url\":\n\t\t\t\t    var m =$('#base_url').val()+$('#cur_dir').val();\n\t\t\t\t    add=$trigger.find('a.link').attr('data-file');\n\t\t\t\t    if (add!=\"\" && add!=null) {\n\t\t\t\t\t\t\tm+=add;\n\t\t\t\t    }\n\t\t\t\t    add=$trigger.find('h4 a.folder-link').attr('data-file');\n\t\t\t\t    if (add!=\"\" && add!=null) {\n\t\t\t\t\t\t\tm+=add;\n\t\t\t\t    }\n\t\t\t\t    bootbox.alert('URL:<br/><div class=\"input-append\" style=\"width:100%\"><input id=\"url_text'+copy_count+'\" type=\"text\" style=\"width:80%; height:30px;\" value=\"'+encodeURL(m)+'\" /><button id=\"copy-button'+copy_count+'\" class=\"btn btn-inverse copy-button\" style=\"width:20%; height:30px;\" data-clipboard-target=\"url_text'+copy_count+'\" data-clipboard-text=\"Copy Me!\" title=\"copy\"></button></div>');\n\t\t\t\t    $('#copy-button'+copy_count).html('<i class=\"icon icon-white icon-share\"></i> '+$('#lang_copy').val());\n\n\t\t\t\t    var client = new ZeroClipboard( $('#copy-button'+copy_count) );\n\n\t\t\t\t\t  client.on( \"ready\", function( readyEvent ) {\n\t\t\t\t\t  \tclient.on(\"wrongFlash noFlash\", function() {\n\t\t\t\t\t\t\t  ZeroClipboard.destroy();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t    client.on( \"aftercopy\", function( event ) {\n\t\t\t\t\t      $('#copy-button'+copy_count).html('<i class=\"icon icon-ok\"></i> '+$('#ok').val());\n\t\t\t\t\t      $('#copy-button'+copy_count).attr('class','btn disabled');\n\t\t\t\t\t      copy_count++;\n\t\t\t\t\t    } );\n\t\t\t\t\t    client.on( 'error', function(event) {\n        \t\t\t})\n\t\t\t\t\t  } );\n\t\t\t\t    break;\n\t\t\t\t\tcase \"unzip\":\n\t\t\t\t\t  var m=$('#sub_folder').val()+$('#fldr_value').val()+$trigger.find('a.link').attr('data-file');\n\t\t\t\t\t  $.ajax({\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\turl: \"ajax_calls.php?action=extract\",\n\t\t\t\t\t\t\tdata: { path: m }\n\t\t\t\t\t  }).done(function( msg ) {\n\t\t\t\t\t\t\tif (msg!=\"\")\n\t\t\t\t\t\t    bootbox.alert(msg);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t    window.location.href = $('#refresh').attr('href') + '&' + new Date().getTime();\n\t\t\t\t\t  });\n\t\t\t\t\t  break;\n\t\t\t\t\tcase \"edit_img\":\n\t\t\t\t    var filename=$trigger.attr('data-name');\n\t\t\t\t    var full_path=$('#base_url_true').val()+$('#cur_dir').val()+filename;\n\t\t\t\t    $('#aviary_img').attr('data-name',filename);\n\t\t\t\t    $('#aviary_img').attr('src',full_path).load(launchEditor('aviary_img', full_path));\n\t\t\t\t    break;\n\t\t\t\t\tcase \"duplicate\":\n\t\t\t\t\t  var old_name=$trigger.find('h4').text().trim();\n\t\t\t\t\t  bootbox.prompt($('#lang_duplicate').val(),$('#cancel').val(),$('#ok').val(), function(name) {\n\t\t\t\t\t\t\tif (name !== null){\n\t\t\t\t\t\t\t  name=fix_filename(name);\n\t\t\t\t\t\t\t  if (name!=old_name) {\n\t\t\t\t\t\t\t\t\tvar _this=$trigger.find('.rename-file');\n\t\t\t\t\t\t\t\t\texecute_action('duplicate_file',_this.attr('data-path'),_this.attr('data-thumb'),name,_this,'apply_file_duplicate');\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t  },old_name);\n\n\t\t\t\t\t  break;\n\t\t\t\t\tcase \"copy\":\n\t\t\t\t    copy_cut_clicked($trigger, 'copy');\n\t\t\t\t\t\tbreak;\n\t\t\t    case \"cut\":\n\t\t\t\t\t\tcopy_cut_clicked($trigger, 'cut');\n\t\t\t\t\t\tbreak;\n\t\t\t    case \"paste\":\n\t\t\t\t    paste_to_this_dir();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"chmod\":\n\t\t\t\t\t\tchmod($trigger);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"edit_text_file\":\n\t\t\t\t\t\tedit_text_file($trigger);\n\t\t\t\t\t\tbreak;\n\t\t  \t}},\n\t\t  \titems: {}\n\t\t};\n\t\t// tooltip options\n\t\t// edit image/show url\n\t\tif (($trigger.find('.img-precontainer-mini .filetype').hasClass('png') ||\n\t\t    $trigger.find('.img-precontainer-mini .filetype').hasClass('jpg') ||\n\t\t    $trigger.find('.img-precontainer-mini .filetype').hasClass('jpeg')) && image_editor )\n\t\t{\n\t\t    options.items.edit_img = {name: $('#lang_edit_image').val(),icon:\"edit_img\", disabled:false };\n\t\t}\n\t\toptions.items.copy_url = {name: $('#lang_show_url').val(),icon:\"url\", disabled:false };\n\t\t// extract\n\t\tif ($trigger.find('.img-precontainer-mini .filetype').hasClass('zip') ||\n\t\t    $trigger.find('.img-precontainer-mini .filetype').hasClass('tar') ||\n\t\t    $trigger.find('.img-precontainer-mini .filetype').hasClass('gz') )\n\t\t{\n\t\t    options.items.unzip = {name: $('#lang_extract').val(),icon:\"extract\", disabled:false };\n\t\t}\n\n\t\t// edit file's content\n\t\tif ($trigger.find('.img-precontainer-mini .filetype').hasClass('edit-text-file-allowed') )\n\t\t{\n\t\t    options.items.edit_text_file = {name: $('#lang_edit_file').val(),icon:\"edit\", disabled:false };\n\t\t}\n\n\t\t// duplicate\n\t\tif (!$trigger.hasClass('directory') && $('#duplicate').val()==1)\n\t\t{\n\t\t    options.items.duplicate = {name: $('#lang_duplicate').val(),icon:\"duplicate\", disabled:false };\n\t\t}\n\n\t\t// copy & cut\n\t\tif (!$trigger.hasClass('directory') && $('#copy_cut_files_allowed').val()==1) {\n\t\t    options.items.copy = {name: $('#lang_copy').val(),icon:\"copy\", disabled:false };\n\t\t    options.items.cut = {name: $('#lang_cut').val(),icon:\"cut\", disabled:false };\n\t\t}\n\t\telse if ($trigger.hasClass('directory') && $('#copy_cut_dirs_allowed').val()==1) {\n\t\t    options.items.copy = {name: $('#lang_copy').val(),icon:\"copy\", disabled:false };\n\t\t    options.items.cut = {name: $('#lang_cut').val(),icon:\"cut\", disabled:false };\n\t\t}\n\n\t\t// paste\n\t\t// Its not added to folders because it might confuse someone\n\t\tif ($('#clipboard').val() != 0 && !$trigger.hasClass('directory')) {\n\t\t    options.items.paste = {name: $('#lang_paste_here').val(),icon:\"clipboard-apply\", disabled:false };\n\t\t}\n\n\t\t// file permission\n\t\tif (!$trigger.hasClass('directory') && $('#chmod_files_allowed').val()==1) {\n\t\t    options.items.chmod = {name: $('#lang_file_permission').val(),icon:\"key\", disabled:false };\n\t\t}\n\t\telse if ($trigger.hasClass('directory') && $('#chmod_dirs_allowed').val()==1) {\n\t\t    options.items.chmod = {name: $('#lang_file_permission').val(),icon:\"key\", disabled:false };\n\t\t}\n\n\t\t// fileinfo\n\t\toptions.items.sep = '----';\n\t\toptions.items.info = {name: \"<strong>\"+$('#lang_file_info').val()+\"</strong>\", disabled:true };\n\t\toptions.items.name = {name: $trigger.attr('data-name'),icon:'label', disabled:true };\n\t\tif ($trigger.attr('data-type')==\"img\") {\n\t\t  options.items.dimension = {name: $trigger.find('.img-dimension').html(),icon:\"dimension\", disabled:true };\n\t\t}\n\t\toptions.items.size = {name: $trigger.find('.file-size').html(),icon:\"size\", disabled:true };\n\t\toptions.items.date = {name: $trigger.find('.file-date').html(),icon:\"date\", disabled:true };\n\n\n\t\treturn options;\n\t      },\n\t      events: {\n\t\thide: function(opt){\n\t\t  $('figure').removeClass('selected');\n\t\t}\n\t    }\n\t});\n\n\t$(document).on('contextmenu', function(e) {\n\t    if (!$(e.target).is(\"figure\"))\n\t       return false;\n\t});\n    }\n\n    // preview image\n    $('#full-img').on('click',function(){\n\t    $('#previewLightbox').lightbox('hide');\n    });\n\n    $('ul.grid').on('click','.modalAV', function(e) {\n\t\t_this=$(this);\n        e.preventDefault();\n\n        $('#previewAV').removeData(\"modal\");\n        $('#previewAV').modal({\n            backdrop: 'static',\n            keyboard: false\n        });\n\n\t\tif (_this.hasClass('audio')) {\n\t    \t$(\".body-preview\").css('height','80px');\n\t\t}else {\n\t    \t$(\".body-preview\").css('height','345px');\n\t\t}\n\n        $.ajax({\n            url: _this.attr('data-url'),\n            success: function(data) {\n\t\t\t\t$(\".body-preview\").html(data);\n\t    \t}\n        });\n    });\n\n    $('ul.grid').on('click','.file-preview-btn', function(e) {\n\t\t_this=$(this);\n        e.preventDefault();\n\n        $.ajax({\n            url: _this.attr('data-url'),\n            success: function(data) {\n\t\t\t\tbootbox.alert(data);\n\t    \t}\n        });\n    });\n\n    // sorting\n    $('input[name=radio-sort]').on('click',function(){\n\t\tvar li=$(this).attr('data-item');\n\t\t$('.filters label').removeClass(\"btn-inverse\");\n\t\t$('.filters label').find('i').removeClass('icon-white');\n\t\t$('#filter-input').val('');\n\t\t$('#'+li).addClass(\"btn-inverse\");\n\t\t$('#'+li).find('i').addClass('icon-white');\n\n    \tif (li=='ff-item-type-all'){\n    \t\tif(js_script){\n    \t\t\t$('.grid li').show(300);\t\n    \t\t}else{\n\t\t\t\twindow.location.href=$('#current_url').val()+\"&sort_by=\"+$('#sort_by').val()+\"&descending=\"+(sortDescending ? 1 : 0);\n    \t\t}\n\t\t}\n\t\telse {\n\t\t\tif ($(this).is(':checked')){\n\t\t\t\t$('.grid li').not('.'+li).hide(300);\n\t\t\t\t$('.grid li.'+li).show(300);\n\t\t\t}\n\t\t}\n\n\t\t\tlazyLoad();\n    });\n\n    var delay = (function(){\n\t\t\tvar timer = 0;\n\t\t\treturn function(callback, ms){\n\t\t\t    clearTimeout (timer);\n\t\t\t    timer = setTimeout(callback, ms);\n\t\t\t};\n    })();\n\n    if (parseInt($('#file_number').val()) > parseInt($('#file_number_limit_js').val())) var js_script=false;\n    else var js_script=true;\n\n    $('#filter-input').on('keyup',function(){\n\t\t$('.filters label').removeClass(\"btn-inverse\");\n\t\t$('.filters label').find('i').removeClass('icon-white');\n\t\t$('#ff-item-type-all').addClass(\"btn-inverse\");\n\t\t$('#ff-item-type-all').find('i').addClass('icon-white');\n\t\tvar val=fix_filename($(this).val()).toLowerCase();\n\t\t$(this).val(val);\n\t    if (js_script) {\n\t\t\tdelay(function(){\n\t\t\t\t$('li','ul.grid ').each(function(){\n\t\t\t\t    var _this = $(this);\n\t\t\t\t    if (val!=\"\" && _this.attr('data-name').toLowerCase().indexOf(val)==-1) {\n\t\t\t\t\t\t\t_this.hide(100);\n\t\t\t\t    }else {\n\t\t\t\t\t\t\t_this.show(100);\n\t\t\t\t    }\n\t\t\t\t});\n\n\t\t\t\tlazyLoad();\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"ajax_calls.php?action=filter&type=\"+val\n\t\t\t\t}).done(function( msg ) {\n\t\t\t\t\tif (msg!=\"\") {\n\t\t\t\t\t  bootbox.alert(msg);\n\t\t\t\t\t}\n\t\t\t    });\n\t\t\t    delay(function(){\n\t\t\t    \tvar sortDescending = $('#descending').val()!=0?true:false;\n\t\t\t    \tsortUnorderedList(sortDescending,\".\"+$('#sort_by').val());\n\t\t\t    },500);\n\t    \n\t\t\t}, 300 );\n\t\t}\n    }).keypress(function(e) {\n\t\t\tif (e.which == 13) {\n\t\t\t    $('#filter').trigger('click');\n\t\t\t}\n    });\n\n    // filtering\n    $('#filter').on('click',function(){\n\tvar val=fix_filename($('#filter-input').val());\n\twindow.location.href=$('#current_url').val()+\"&filter=\"+val;\n    });\n\n    // info btn\n    $('#info').on('click',function(){\n\tbootbox.alert('<div class=\"text-center\"><br/><img src=\"img/logo.png\" alt=\"responsive filemanager\"/><br/><br/><p><strong>RESPONSIVE filemanager v.'+version+'</strong><br/><a href=\"http://www.responsivefilemanager.com\">responsivefilemanager.com</a></p><br/><p>Copyright Â© <a href=\"http://www.tecrail.com\" alt=\"tecrail\">Tecrail</a> - Alberto Peripolli. All rights reserved.</p><br/><p>License<br/><small><img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"http://responsivefilemanager.com/license.php\" /><br />This work is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/3.0/\">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</small></p></div>');\n\t});\n\n\t$('#change_lang_btn').on('click',function(){\n\t\tchange_lang();\n\t});\n\n    // upload btn\n    $('#uploader-btn').on('click',function(){\n\t    var path=$('#sub_folder').val()+$('#fldr_value').val()+\"/\";\n\t    path=path.substring(0, path.length - 1);\n\n\t    $('#iframe-container').html($('<iframe />', {\n\t\tname: 'JUpload',\n\t\tid:   'uploader_frame',\n\t\tsrc: \"uploader/index.php?path=\"+path,\n\t\tframeborder: 0,\n\t\twidth: \"100%\",\n\t\theight: 360\n\t    }));\n\t});\n    $('.upload-btn').on('click',function(){\n\t    $('.uploader').show(500);\n    });\n\n    var sortDescending=$('#descending').val();\n    $('.sorter').on('click',function(){\n\t\t\t_this=$(this);\n\t\t\tif($('#sort_by').val() === _this.attr('data-sort')){\n\t\t\t\tsortDescending = sortDescending==0?true:false\n\t\t\t} else {\n\t\t\t\tsortDescending = true;\n\t\t\t}\n\n\t\t\tif (js_script) {\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"ajax_calls.php?action=sort&sort_by=\"+_this.attr('data-sort')+\"&descending=\"+(sortDescending ? 1 : 0)\n\t\t\t\t});\n\t\t\t\tsortUnorderedList(sortDescending,\".\"+_this.attr('data-sort'));\n\t\t\t\t$(' a.sorter').removeClass('descending').removeClass('ascending');\n\t\t\t\tif (sortDescending)\n\t\t\t\t\t$('.sort-'+_this.attr('data-sort')).addClass(\"descending\");\n\t\t\t\telse\n\t\t\t\t\t$('.sort-'+_this.attr('data-sort')).addClass(\"ascending\");\n\n\t\t\t\t$('#sort_by').val(_this.attr('data-sort'));\n\t\t\t\t$('#descending').val(sortDescending ? 1 : 0);\n\t\t\t\tlazyLoad();\n\t\t\t}else {\n\t\t\t\twindow.location.href=$('#current_url').val()+\"&sort_by=\"+_this.attr('data-sort')+\"&descending=\"+(sortDescending ? 1 : 0);\n\t\t\t}\n\t\t});\n\n\t\t$('.close-uploader').on('click',function(){\n\t\t\t$('.uploader').hide(500);\n\t\t\tsetTimeout(function(){window.location.href = $('#refresh').attr('href') + '&' + new Date().getTime();},420);\n\t\t\t});\n\n\t\t\t$('ul.grid').on('click','.preview',function(){\n\t\t\tvar _this = $(this);\n\t\t\t$('#full-img').attr('src',decodeURIComponent(_this.attr('data-url')));\n\t\t\treturn true;\n    });\n\n    $('body').on('keypress',function(e){\n\tvar c = String.fromCharCode(e.which);\n\tif (c==\"'\" || c=='\"' || c==\"\\\\\" || c=='/') {\n\t    return false;\n\t}\n    });\n\n    $('ul.grid').on('click','.rename-file',function(){\n\tvar _this = $(this);\n\n\tvar file_container=_this.parent().parent().parent();\n\tvar file_title=file_container.find('h4');\n\tvar old_name=$.trim(file_title.text());\n\tbootbox.prompt($('#rename').val(),$('#cancel').val(),$('#ok').val(), function(name) {\n\t    if (name !== null){\n\t\tname=fix_filename(name);\n\t\tif (name!=old_name) {\n\t\t    execute_action('rename_file',_this.attr('data-path'),_this.attr('data-thumb'),name,file_container,'apply_file_rename');\n\t\t}\n\t    }\n\t},old_name);\n    });\n\n    $('ul.grid').on('click','.rename-folder',function(){\n\tvar _this = $(this);\n\n\tvar file_container=_this.parent().parent().parent();\n\tvar file_title=file_container.find('h4');\n\tvar old_name=$.trim(file_title.text());\n\tbootbox.prompt($('#rename').val(),$('#cancel').val(),$('#ok').val(), function(name) {\n\t    if (name !== null){\n\t\tname=fix_filename(name).replace('.','');\n\t\tif (name!=old_name) {\n\t\t    execute_action('rename_folder',_this.attr('data-path'),_this.attr('data-thumb'),name,file_container,'apply_folder_rename');\n\t\t}\n\t    }\n\t},old_name);\n    });\n\n    $('ul.grid').on('click','.delete-file',function(){\n\tvar _this = $(this);\n\tbootbox.confirm(_this.attr('data-confirm'),$('#cancel').val(),$('#ok').val(), function(result) {\n\t    if (result==true) {\n\t\texecute_action('delete_file',_this.attr('data-path'),_this.attr('data-thumb'),'','','');\n\t\t_this.parent().parent().parent().parent().remove();\n\t    }\n\t});\n    });\n\n    $('ul.grid').on('click','.delete-folder',function(){\n\tvar _this = $(this);\n\n\tbootbox.confirm(_this.attr('data-confirm'),$('#cancel').val(),$('#ok').val(), function(result) {\n\t    if (result==true) {\n\t\texecute_action('delete_folder',_this.attr('data-path'),_this.attr('data-thumb'),'','','');\n\t\t_this.parent().parent().parent().remove();\n\t    }\n\t});\n    });\n\n    $('.create-file-btn').on('click',function(){\n    \tcreate_text_file();\n    });\n\n    $('.new-folder').on('click',function(){\n\tbootbox.prompt($('#insert_folder_name').val(),$('#cancel').val(),$('#ok').val(), function(name) {\n\t    if (name !== null) {\n\t\tname=fix_filename(name).replace('.','');\n\t\tvar folder_path=$('#sub_folder').val()+$('#fldr_value').val()+ name;\n\t\tvar folder_path_thumb=$('#cur_dir_thumb').val()+ name;\n\t\t$.ajax({\n\t\t\t  type: \"POST\",\n\t\t\t  url: \"execute.php?action=create_folder\",\n\t\t\t  data: {path: folder_path, path_thumb: folder_path_thumb}\n\t\t\t}).done(function( msg ) {\n\t\t\t\tsetTimeout(function(){window.location.href = $('#refresh').attr('href') + '&' + new Date().getTime();},300);\n\n\t\t\t});\n\t    }\n\t},$('#new_folder').val());\n    });\n\n    $('.view-controller button').on('click',function(){\n\t    var _this = $(this);\n\n\t    $('.view-controller button').removeClass('btn-inverse');\n\t    $('.view-controller i').removeClass('icon-white');\n\t    _this.addClass('btn-inverse');\n\t    _this.find('i').addClass('icon-white');\n\n\t    $.ajax({\n\t\t\t\turl: \"ajax_calls.php?action=view&type=\"+_this.attr('data-value')\n\t\t\t    }).done(function( msg ) {\n\t\t\t\tif (msg!=\"\") {\n\t\t\t\t  bootbox.alert(msg);\n\t\t\t\t}\n\t    });\n\t    if (typeof  $('ul.grid')[0] !== \"undefined\" &&  $('ul.grid')[0])\n\t\t$('ul.grid')[0].className = $('ul.grid')[0].className.replace(/\\blist-view.*?\\b/g, '');\n\t    if (typeof $('.sorter-container')[0] !== \"undefined\" && $('.sorter-container')[0])\n\t\t$('.sorter-container')[0].className = $('.sorter-container')[0].className.replace(/\\blist-view.*?\\b/g, '');\n\n\t    var value=_this.attr('data-value');\n\t    $('#view').val(value);\n\t    $('ul.grid').addClass('list-view'+value);\n\t    $('.sorter-container').addClass('list-view'+value);\n\t    if (_this.attr('data-value')>=1){\n\t\tfix_colums(14);\n\t    }\n\t    else {\n\t\t$('ul.grid li').css( \"width\",126);\n\t\t$('ul.grid figure').css( \"width\",122);\n\t    }\n      lazyLoad();\n\t});\n\n\tif (!Modernizr.touch) {\n\t    $('.tip').tooltip({placement: \"bottom\"});\n\t    $('.tip-top').tooltip({placement: \"top\"});\n\t    $('.tip-left').tooltip({placement: \"left\"});\n\t    $('.tip-right').tooltip({placement: \"right\"});\n\t    $('body').addClass('no-touch');\n\t}else {\n\n\t    $('#help').show();\n\n\t    //Enable swiping...\n\t    $(\".box:not(.no-effect)\").swipe( {\n\t\t    //Generic swipe handler for all directions\n\t\t    swipeLeft:swipe_reaction,\n\t\t    swipeRight:swipe_reaction,\n\t\t    //Default is 75px, set to 0 for demo so any distance triggers swipe\n\t       threshold:30\n\t    });\n\t}\n\n\t$('.paste-here-btn').on('click',function(){\n\t    if ($(this).hasClass('disabled') == false){\n\t    \tpaste_to_this_dir();\n\t    }\n    });\n\n    $('.clear-clipboard-btn').on('click',function(){\n    \tif ($(this).hasClass('disabled') == false){\n\t    \tclear_clipboard();\n\t    }\n    });\n\n\t// reverted to jquery from Modernizr.csstransforms because drag&drop\n\tif(!Modernizr.csstransforms) { // Test if CSS transform are supported\n\t\t$('figure').on('mouseover',function(){\n\t\t\tif ($('#view').val()==0 && $('#main-item-container').hasClass('no-effect-slide') === false) {\n\t\t\t\t$(this).find('.box:not(.no-effect)').animate({top: \"-26px\"} ,{queue:false,duration:300});\n\t\t\t}\n\t\t});\n\n\t\t$('figure').on('mouseout', function(){\n\t\t\tif ($('#view').val()==0) {\n\t\t\t\t$(this).find('.box:not(.no-effect)').animate({top: \"0px\"} ,{queue:false,duration:300});\n\t\t\t}\n\t\t});\n\t}\n\n\t$(window).resize(function(){fix_colums(28); });\n\tfix_colums(14);\n\n\t// New link handler\n\tfunction handleFileLink($el) {\n\t\twindow[$el.attr('data-function')]($el.attr('data-file'), $el.attr('data-field_id'));\n\t}\n\n\t$('ul.grid .link').on('click',function(){\n\t\thandleFileLink($(this));\n\t});\n\n\t$('ul.grid div.box').on('click',function(e){\n\n\t\tvar fileLink = $(this).find(\".link\");\n\t\t\tif (fileLink.length!==0) {\n\t\t\t\thandleFileLink(fileLink);\n\t\t}\n\t\telse {\n\t\t\tvar folderLink = $(this).find(\".folder-link\");\n\t\t\tif (folderLink.length!==0)\n\t\t\t\tdocument.location = $(folderLink).prop(\"href\");\n\t\t}\n\t});\n\t// End of link handler\n\n\tif ($('#clipboard').val() == 1){\n\t\ttoggle_clipboard(true);\n\t}\n\telse {\n\t\ttoggle_clipboard(false);\n\t}\n\n\t// Drag & Drop\n\t$('li.dir, li.file').draggable({\n\t\tdistance: 20,\n\t\tcursor: \"move\",\n\n\t\thelper: function(){\n\t\t\t//hack all the way through\n\t\t\t$(this).find('figure').find('.box').css(\"top\", \"0px\");\n\t\t\tvar ret=$(this).clone().css(\"z-index\", 1000).find('.box').css(\"box-shadow\", \"none\").css(\"-webkit-box-shadow\", \"none\").parent().parent();\n\t\t\t$(this).addClass('selected');\n\t\t\treturn ret;\n\t\t},\n\n\t\tstart: function(){\n\t\t\tif ($('#view').val()==0) {\n\t\t\t\t$('#main-item-container').addClass('no-effect-slide');\n\t\t\t}\n\t\t},\n\t\tstop: function(){\n\t\t\t$(this).removeClass('selected');\n\t\t\tif ($('#view').val()==0) {\n\t\t\t\t$('#main-item-container').removeClass('no-effect-slide');\n\t\t\t}\n\t\t}\n\t});\n\n\t$('li.dir,li.back').droppable({\n    accept: \"ul.grid li\",\n    activeClass: \"ui-state-highlight\",\n  \thoverClass: \"ui-state-hover\",\n\t\tdrop: function(event, ui){\n\t\t\tdrag_n_drop_paste(ui.draggable.find('figure'), $(this).find('figure'));\n\t\t}\n\t});\n\n\t// file permissions window\n\t$(document).on(\"keyup\", '#chmod_form #chmod_value', function()\n\t{\n\t\tchmod_logic(true);\n\t});\n\t//safety\n\t$(document).on(\"focusout\", '#chmod_form #chmod_value', function()\n\t{\n\t\tvar chmod_temp_val = $('#chmod_form #chmod_value').val();\n\t\tif (chmod_temp_val.match(/^[0-7]{3}$/) == null)\n\t\t{\n\t\t\tvar def_val = $('#chmod_form #chmod_value').attr('data-def-value');\n\t\t\t$('#chmod_form #chmod_value').val(def_val);\n\t\t\tchmod_logic(true);\n\t\t}\n\t});\n});\n\nfunction create_text_file() {\n\t// remove to prevent duplicates\n\t$('#textfile_create_area').parent().parent().remove();\n\n\tvar init_form = $('#lang_filename').val() + ': <input type=\"text\" id=\"create_text_file_name\" style=\"min-height:30px\"><br><hr><textarea id=\"textfile_create_area\" style=\"width:100%;height:150px;\"></textarea>';\n\n\tbootbox.dialog(init_form,\n\t[\n\t\t{\n\t\t\t\"label\" : $('#cancel').val(),\n\t\t\t\"class\" : \"btn\"\n\t\t},\n\t\t{\n\t\t\t\"label\" : $('#ok').val(),\n\t\t\t\"class\" : \"btn-inverse\",\n\t\t\t\"callback\": function() {\n\t\t\t\tvar newFileName = $('#create_text_file_name').val();\n                var newContent = $('#textfile_create_area').val();\n\n                if (newFileName !== null)\n                {\n                \tnewFileName = fix_filename(newFileName);\n                \tvar folder_path = $('#sub_folder').val()+$('#fldr_value').val()+ newFileName;\n\t\t\t\t\tvar folder_path_thumb = $('#cur_dir_thumb').val()+ newFileName;\n                \t// post ajax\n                \t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: \"execute.php?action=create_file\",\n\t\t\t\t\tdata: {path: folder_path, path_thumb: folder_path_thumb, name: newFileName, new_content: newContent}\n\t\t\t\t\t}).done(function( status_msg ) {\n\t\t\t\t\t\tif (status_msg!=\"\"){\n\t\t\t\t\t\t\tbootbox.alert(status_msg, function (result) {\n\t\t\t\t\t\t\t\tsetTimeout(function(){window.location.href = $('#refresh').attr('href') + '&' + new Date().getTime();},500);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n            }\n\t\t}\n\t],\n\t{\n\t\t\"header\" :$('#lang_new_file').val()\n\t});\n}\n\nfunction edit_text_file($trigger) {\n\t// remove to prevent duplicates\n\t$('#textfile_edit_area').parent().parent().remove();\n\n\tvar thumb_path = $trigger.find('.rename-file').attr('data-thumb');\n\tvar full_path = $trigger.find('.rename-file').attr('data-path');\n\n\t$.ajax({\n\ttype: \"POST\",\n\turl: \"ajax_calls.php?action=get_file&sub_action=edit&preview_mode=text\",\n\tdata: {path: full_path}\n    }).done(function( init_content ){\n\t\t\tbootbox.dialog(init_content,\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t\"label\" : $('#cancel').val(),\n\t\t\t\t\t\"class\" : \"btn\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"label\" : $('#ok').val(),\n\t\t\t\t\t\"class\" : \"btn-inverse\",\n\t\t\t\t\t\"callback\": function() {\n\t                    var newContent = $('#textfile_edit_area').val();\n\t                \t// post ajax\n\t                \t$.ajax({\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\turl: \"execute.php?action=save_text_file\",\n\t\t\t\t\t\tdata: {path: full_path, path_thumb: thumb_path, new_content: newContent}\n\t\t\t\t\t\t}).done(function( status_msg ) {\n\t\t\t\t\t\t\tif (status_msg!=\"\"){\n\t\t\t\t\t\t\t\tbootbox.alert(status_msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t                }\n\t\t\t\t}\n\t\t\t],\n\t\t\t{\n\t\t\t\t\"header\" : $trigger.find('.name_download').val()\n\t\t\t});\n    });\n}\n\nfunction change_lang() {\n\t$.ajax({\n\ttype: \"POST\",\n\turl: \"ajax_calls.php?action=get_lang\",\n\tdata: {}\n    }).done(function( init_msg )\n    {\n\t\tbootbox.dialog(init_msg,\n\t\t[\n\t\t\t{\n\t\t\t\t\"label\" : $('#cancel').val(),\n\t\t\t\t\"class\" : \"btn\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"label\" : $('#ok').val(),\n\t\t\t\t\"class\" : \"btn-inverse\",\n\t\t\t\t\"callback\": function() {\n\t\t\t\t\t// get new lang\n                    var newLang = $('#new_lang_select option:selected').val();\n                \t// post ajax\n                \t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: \"ajax_calls.php?action=change_lang\",\n\t\t\t\t\tdata: {choosen_lang: newLang}\n\t\t\t\t\t}).done(function( error_msg ) {\n\t\t\t\t\t\tif (error_msg!=\"\"){\n\t\t\t\t\t\t\tbootbox.alert(error_msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tsetTimeout(function(){window.location.href = $('#refresh').attr('href') + '&' + new Date().getTime();},500);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n                }\n\t\t\t}\n\t\t],\n\t\t{\n\t\t\t\"header\" : $('#lang_lang_change').val()\n\t\t});\n    });\n}\n\nfunction chmod($trigger) {\n\t// remove to prevent duplicates\n\t$('#files_permission_start').parent().parent().remove();\n\n\tif (!$trigger.hasClass('directory')){\n    \tvar thumb_path = $trigger.find('.rename-file').attr('data-thumb');\n    \tvar full_path = $trigger.find('.rename-file').attr('data-path');\n    }\n    else {\n    \tvar thumb_path = $trigger.find('.rename-folder').attr('data-thumb');\n    \tvar full_path = $trigger.find('.rename-folder').attr('data-path');\n    }\n\n    // ajax -> box -> ajax -> box -> mind blown\n\t$.ajax({\n\ttype: \"POST\",\n\turl: \"ajax_calls.php?action=chmod\",\n\tdata: { path: full_path, path_thumb: thumb_path }\n    }).done(function( init_msg )\n    {\n\t\tbootbox.dialog(init_msg,\n\t\t[\n\t\t\t{\n\t\t\t\t\"label\" : $('#cancel').val(),\n\t\t\t\t\"class\" : \"btn\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"label\" : $('#ok').val(),\n\t\t\t\t\"class\" : \"btn-inverse\",\n\t\t\t\t\"callback\": function() {\n\t\t\t\t\t// get new perm\n                    var newPerm = $('#chmod_form #chmod_value').val();\n                    if (newPerm != '' && typeof newPerm !== \"undefined\")\n                    {\n                    \t// get recursive option if any\n                    \tvar recOpt = $('#chmod_form input[name=apply_recursive]:checked').val();\n                    \tif (recOpt == '' || typeof recOpt === \"undefined\"){\n                    \t\trecOpt = 'none';\n                    \t}\n\n                    \t// post ajax\n                    \t$.ajax({\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\turl: \"execute.php?action=chmod\",\n\t\t\t\t\t\tdata: {path: full_path, path_thumb: thumb_path, new_mode: newPerm, is_recursive: recOpt}\n\t\t\t\t\t\t}).done(function( status_msg ) {\n\t\t\t\t\t\t\tif (status_msg!=\"\"){\n\t\t\t\t\t\t\t\tbootbox.alert(status_msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n                    }\n                }\n\t\t\t}\n\t\t],\n\t\t{\n\t\t\t\"header\" : $('#lang_file_permission').val()\n\t\t});\n    });\n}\n\nfunction chmod_logic(is_text) {\n\tvar perm = [];\n\tperm['user'] = 0;\n\tperm['group'] = 0;\n\tperm['all'] = 0;\n\n\t// value was set by text input\n\tif (typeof is_text !== \"undefined\" && is_text == true){\n\t\t// assign values\n\t\tvar newperm = $('#chmod_form #chmod_value').val();\n\t\tperm['user'] = newperm.substr(0,1);\n\t\tperm['group'] = newperm.substr(1,1);\n\t\tperm['all'] = newperm.substr(2,1);\n\n\t\t// check values for errors (empty,not num, not 0-7)\n\t\t$.each(perm, function(index) {\n\t\t\tif ( perm[index] == '' ||\n\t\t\t\t$.isNumeric(perm[index]) == false ||\n\t\t\t\t(parseInt(perm[index]) < 0 || parseInt(perm[index]) > 7) )\n\t\t\t{\n\t\t\t\tperm[index] = \"0\";\n\t\t\t}\n\t\t});\n\n\t\t// update checkboxes\n\t\t$('#chmod_form input:checkbox').each(function() {\n\t\t\tvar group = $(this).attr('data-group');\n\t\t\tvar val = $(this).attr('data-value');\n\n\t\t\tif (chmod_logic_helper(perm[group], val)){\n\t\t\t\t$(this).prop('checked', true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$(this).prop('checked', false);\n\t\t\t}\n\t\t});\n\n\t}\n\telse { //a checkbox was updated\n\t\t$('#chmod_form input:checkbox:checked').each(function() {\n\t\t\tvar group = $(this).attr('data-group');\n\t\t\tvar val = $(this).attr('data-value');\n\t\t\tperm[group] = parseInt(perm[group]) + parseInt(val);\n\t\t});\n\n\t\t$('#chmod_form #chmod_value').val(perm['user'].toString() + perm['group'].toString() + perm['all'].toString());\n\t}\n}\n\nfunction chmod_logic_helper(perm, val){\n\tvar valid = [];\n\tvalid[1] = [1,3,5,7];\n\tvalid[2] = [2,3,6,7];\n\tvalid[4] = [4,5,6,7];\n\n\tperm = parseInt(perm);\n\tval = parseInt(val);\n\n\tif ($.inArray(perm, valid[val]) != -1){\n\t\treturn true;\n\t}\n\telse {\n\t\treturn false;\n\t}\n}\n\nfunction clear_clipboard() {\n\tbootbox.confirm($('#lang_clear_clipboard_confirm').val(),$('#cancel').val(),$('#ok').val(), function(result) {\n\t\tif (result == true){\n\t\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: \"ajax_calls.php?action=clear_clipboard\",\n\t\t\tdata: {}\n\t\t\t}).done(function( msg ) {\n\t\t\tif (msg!=\"\")\n\t\t\t    bootbox.alert(msg);\n\t\t\telse\n\t\t\t   $('#clipboard').val('0');\n\t\t\t\ttoggle_clipboard(false);\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction copy_cut_clicked($trigger, atype) {\n\tif (atype != 'copy' && atype != 'cut'){\n\t\treturn;\n\t}\n\n\tif (!$trigger.hasClass('directory')){\n    \tvar thumb_path = $trigger.find('.rename-file').attr('data-thumb');\n    \tvar full_path = $trigger.find('.rename-file').attr('data-path');\n    }\n    else {\n    \tvar thumb_path = $trigger.find('.rename-folder').attr('data-thumb');\n    \tvar full_path = $trigger.find('.rename-folder').attr('data-path');\n    }\n\n    $.ajax({\n\ttype: \"POST\",\n\turl: \"ajax_calls.php?action=copy_cut\",\n\tdata: { path: full_path, path_thumb: thumb_path, sub_action: atype }\n    }).done(function( msg ) {\n\t\tif (msg!=\"\"){\n\t\t    bootbox.alert(msg);\n\t\t}\n\t\telse {\n\t\t   $('#clipboard').val(\"1\");\n\t\t\ttoggle_clipboard(true);\n\t\t}\n    });\n}\n\nfunction paste_to_this_dir(dnd) {\n\tbootbox.confirm($('#lang_paste_confirm').val(),$('#cancel').val(),$('#ok').val(), function(result) {\n\t\tif (result == true){\n\t\t\tif (typeof dnd != 'undefined'){\n\t\t\t\tvar folder_path = dnd.find('.rename-folder').attr('data-path');\n\t\t\t\tvar folder_path_thumb = dnd.find('.rename-folder').attr('data-thumb');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar folder_path = $('#sub_folder').val()+$('#fldr_value').val();\n\t\t\t\tvar folder_path_thumb = $('#cur_dir_thumb').val();\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: \"execute.php?action=paste_clipboard\",\n\t\t\tdata: {path: folder_path, path_thumb: folder_path_thumb}\n\t\t\t}).done(function( msg ) {\n\t\t\t\tif (msg!=\"\"){\n\t\t\t\t\tbootbox.alert(msg);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$('#clipboard').val('0');\n\t\t\t\t\ttoggle_clipboard(false);\n\t\t\t\t\tsetTimeout(function(){window.location.href = $('#refresh').attr('href') + '&' + new Date().getTime();},300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\n// Had to separate from copy_cut_clicked & paste_to_this_dir func\n// because of feedback and on error bahhhhh...\nfunction drag_n_drop_paste($trigger, dnd){\n\tif (!$trigger.hasClass('directory')){\n\t\tvar obj= $trigger.find('.rename-file');\n\t}\n\telse\n\t{\n\t\tvar obj = $trigger.find('.rename-folder');\n\t}\n\n\tvar thumb_path = obj.attr('data-thumb');\n\tvar full_path = obj.attr('data-path');\n\n\t$trigger.parent().hide(100);\n\n\t$.ajax({\n\t\ttype: \"POST\",\n\t\turl: \"ajax_calls.php?action=copy_cut\",\n\t\tdata: { path: full_path, path_thumb: thumb_path, sub_action: 'cut' }\n\t}).done(function( msg ) {\n\t\tif (msg!=\"\"){\n\t\t  bootbox.alert(msg);\n\t\t}\n\t\telse {\n\t\t  if (typeof dnd != 'undefined'){\n\t\t  \tif(dnd.hasClass('back-directory')){\n\t\t  \t\tvar folder_path=dnd.find('.path').val();\n\t\t  \t\tvar folder_path_thumb=dnd.find('.path_thumb').val();\n\t\t  \t}else{\n\t\t  \t\tvar folder_path = dnd.find('.rename-folder').attr('data-path');\n\t\t\t\t\tvar folder_path_thumb = dnd.find('.rename-folder').attr('data-thumb');\n\t\t  \t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar folder_path = $('#sub_folder').val()+$('#fldr_value').val();\n\t\t\t\tvar folder_path_thumb = $('#cur_dir_thumb').val();\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\turl: \"execute.php?action=paste_clipboard\",\n\t\t\t\tdata: {path: folder_path, path_thumb: folder_path_thumb}\n\t\t\t}).done(function( msg ) {\n\t\t\t\tif (msg!=\"\"){\n\t\t\t\t\tbootbox.alert(msg);\n\t\t\t\t\t$trigger.parent().show(100);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$('#clipboard').val('0');\n\t\t\t\t\ttoggle_clipboard(false);\n\t\t\t\t\t$trigger.parent().remove();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})\n\t.error(function(err){\n\t\t$trigger.parent().show(100);\n\t});\n}\n\nfunction toggle_clipboard(lever) {\n\tif (lever == true){\n\t\t$('.paste-here-btn, .clear-clipboard-btn').removeClass('disabled');\n\t}\n\telse {\n\t\t$('.paste-here-btn, .clear-clipboard-btn').addClass('disabled');\n\t}\n}\n\nfunction fix_colums(adding) {\n\n    var width=$('.breadcrumb').width()+adding;\n    $('.uploader').css('width',width);\n    if ($('#view').val()>0){\n\tif ($('#view').val()==1) {\n\t    $('ul.grid li, ul.grid figure').css( \"width\", '100%');\n\t}else {\n\t    var col=Math.floor(width/380);\n\t    if (col==0){\n\t\tcol=1;\n\t\t$('h4').css('font-size',12);\n\t    }\n\t    width=Math.floor((width/col)-3);\n\t    $('ul.grid li, ul.grid figure').css( \"width\", width);\n\t}\n\t$('#help').hide();\n    }else {if (Modernizr.touch) {\n\t    $('#help').show();\n    }}\n}\n\nfunction swipe_reaction(event, direction, distance, duration, fingerCount) {\n\tvar _this = $(this);\n\n    if ($('#view').val()==0) {\n\t\tif (_this.attr('toggle')==1) {\n\t\t\t_this.attr('toggle',0);\n\t\t\t_this.animate({top: \"0px\"} ,{queue:false,duration:300});\n\t\t}else {\n\t\t\t_this.attr('toggle',1);\n\t\t\t_this.animate({top: \"-30px\"} ,{queue:false,duration:300});\n\t\t}\n\n    }\n}\n\nfunction encodeURL(url){\n\tvar tmp=url.split('/');\n\tfor(var i=3;i<tmp.length;i++){\n\t\ttmp[i]=encodeURIComponent(tmp[i]);\n\t}\n\treturn tmp.join('/');\n}\n\nfunction apply(file,external){\n  if ($('#popup').val()==1) var window_parent=window.opener; else var window_parent=window.parent;\n  var path = $('#cur_dir').val();\n  //path = path.replace('\\\\', '/');\n  var subdir = $('#subdir').val();\n  var base_url = $('#base_url').val();\n  var alt_name=file.substr(0, file.lastIndexOf('.'));\n  var ext=file.split('.').pop();\n  ext=ext.toLowerCase();\n  var fill='';\n  var ext_audio=new Array('ogg','mp3','wav');\n  var ext_video=new Array('mp4','ogg','webm');\n  var is_return_relative_url = $('#return_relative_url').val();\n  var url= encodeURL((is_return_relative_url == 1 ? subdir : base_url+path)+file);\n\n  if (external!=\"\"){\n\t\tif ($('#crossdomain').val()==1){\n\t\t\twindow_parent.postMessage({\n\t\t\t\tsender: 'responsivefilemanager',\n\t\t\t\turl: url,\n\t\t\t\tfield_id : external\n\t\t\t},\n\t\t\t'*'\n\t\t\t);\n    } else {\n\t\t\tvar target = $('#'+external, window_parent.document);\n\t\t\ttarget.val(url).trigger('change');\n\t\t\tif(typeof window_parent.responsive_filemanager_callback == 'function'){\n\t\t\t\twindow_parent.responsive_filemanager_callback(external);\n\t\t\t}\n\t\t\tclose_window();\n\t\t}\n  }else{\n\t  if ($.inArray(ext, ext_img) > -1){\n\t    fill='<img src=\"'+url+'\" alt=\"'+alt_name+'\" />';\n\t  }else {\n\t\t\tif ($.inArray(ext, ext_video) > -1){\n\t\t\t  fill='<video controls source src=\"'+url+'\" type=\"video/'+ext+'\">'+alt_name+'</video>';\n\t\t\t}else {\n\t\t\t  if ($.inArray(ext, ext_audio) > -1 ){\n\t\t\t\t\tif (ext=='mp3') { ext='mpeg'; }\n\t\t\t\t\tfill='<audio controls src=\"'+url+'\" type=\"audio/'+ext+'\">'+alt_name+'</audio>';\n\t\t\t  }else {\n\t\t\t\t\tfill='<a href=\"'+url+'\" title=\"'+alt_name+'\">'+alt_name+'</a>';\n\t\t\t  }\n\t\t\t}\n\n\t  }\n\n\t\tif ($('#crossdomain').val()==1){\n\t\t\twindow_parent.postMessage({\n\t\t\t\t\tsender: 'responsivefilemanager',\n\t\t\t\t\turl: url,\n\t\t\t\t\tfield_id : null,\n\t\t\t\t\thtml: fill\n\t\t\t\t},\n\t\t\t\t'*'\n\t\t\t);\n\n\t\t} else {\n\t\t\t// tinymce 3.X\n\t\t\tif ( parent.tinymce.majorVersion < 4 )\n\t\t\t{\n\t\t\t\tparent.tinymce.activeEditor.execCommand('mceInsertContent', false, fill);\n\t\t\t\tparent.tinymce.activeEditor.windowManager.close( parent.tinymce.activeEditor.windowManager.params.mce_window_id );\n\t\t\t}\n\t\t\t// tinymce 4.X\n\t\t\telse\n\t\t\t{\n\t\t\t\tparent.tinymce.activeEditor.insertContent(fill);\n\t\t\t\tparent.tinymce.activeEditor.windowManager.close();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\nfunction apply_link(file,external){\n  if ($('#popup').val()==1) var window_parent=window.opener; else var window_parent=window.parent;\n  var path = $('#cur_dir').val();\n  path = path.replace('\\\\', '/');\n  var subdir = $('#subdir').val();\n  subdir = subdir.replace('\\\\', '/');\n  var base_url = $('#base_url').val();\n  var is_return_relative_url = $('#return_relative_url').val();\n  var url= encodeURL((is_return_relative_url == 1 ? subdir : base_url+path)+file);\n\n\tif (external!=\"\"){\n\t\tif ($('#crossdomain').val()==1){\n\t\t\twindow_parent.postMessage({\n\t\t\t\t\tsender: 'responsivefilemanager',\n\t\t\t\t\turl: url,\n\t\t\t\t\tfield_id : external\n\t\t\t\t},\n\t\t\t\t'*'\n\t\t\t);\n\t  } else {\n\t\t\tvar target = $('#'+external, window_parent.document);\n\t\t\ttarget.val(url).trigger('change');\n\t\t\tif(typeof window_parent.responsive_filemanager_callback == 'function'){\n\t\t\t\twindow_parent.responsive_filemanager_callback(external);\n\t\t\t}\n\t\t\tclose_window();\n\t\t}\n\t}else{\n\t\tapply_any(url);\n\t}\n}\n\nfunction apply_img(file,external){\n  if ($('#popup').val()==1) var window_parent=window.opener; else var window_parent=window.parent;\n  var path = $('#cur_dir').val();\n  path = path.replace('\\\\', '/');\n  var subdir = $('#subdir').val();\n  subdir = subdir.replace('\\\\', '/');\n  var base_url = $('#base_url').val();\n  var is_return_relative_url = $('#return_relative_url').val();\n  var url= encodeURL((is_return_relative_url == 1 ? subdir : base_url+path)+file);\n\n  if (external!=\"\"){\n\t\tif ($('#crossdomain').val()==1){\n\t\t\twindow_parent.postMessage({\n\t\t\t\t\tsender: 'responsivefilemanager',\n\t\t\t\t\turl: url,\n\t\t\t\t\tfield_id : external\n\t\t\t\t},\n\t\t\t\t'*'\n\t\t\t);\n      } else {\n\t\t\tvar target = $('#'+external, window_parent.document);\n\t\t\ttarget.val(url).trigger('change');\n\t\t\tif(typeof window_parent.responsive_filemanager_callback == 'function'){\n\t\t\t\twindow_parent.responsive_filemanager_callback(external);\n\t\t\t}\n\t\t\tclose_window();\n\t\t}\n  }else{\n    apply_any(url);\n  }\n}\n\nfunction apply_video(file,external){\n  if ($('#popup').val()==1) var window_parent=window.opener; else var window_parent=window.parent;\n  var path = $('#cur_dir').val();\n  path = path.replace('\\\\', '/');\n  var subdir = $('#subdir').val();\n  subdir = subdir.replace('\\\\', '/');\n  var base_url = $('#base_url').val();\n  var is_return_relative_url = $('#return_relative_url').val();\n  var url= encodeURL((is_return_relative_url == 1 ? subdir : base_url+path)+file);\n\n  if (external!=\"\"){\n\t\tif ($('#crossdomain').val()==1){\n\t\t\twindow_parent.postMessage({\n\t\t\t\t\tsender: 'responsivefilemanager',\n\t\t\t\t\turl: url,\n\t\t\t\t\tfield_id : external\n\t\t\t\t},\n\t\t\t\t'*'\n\t\t\t);\n    } else {\n\t\t\tvar target = $('#'+external, window_parent.document);\n\t\t\ttarget.val(url).trigger('change');\n\t\t\tif(typeof window_parent.responsive_filemanager_callback == 'function'){\n\t\t\t\twindow_parent.responsive_filemanager_callback(external);\n\t\t\t}\n\t\t\tclose_window();\n\t\t}\n  }else{\n\t\tapply_any(url);\n\t}\n}\n\nfunction apply_none(file,external){\n\tvar _this=$('li[data-name=\"'+file+'\"]').find('.preview');\n\n\tif (_this.html()!=\"\" && _this.html()!==undefined){\n\t  $('#full-img').attr('src',decodeURIComponent(_this.attr('data-url')));\n\t  if (_this.hasClass('disabled')==false){\n\t\t\t$('#previewLightbox').lightbox();\n\t  }\n\t}else {\n\t  var _this=$('li[data-name=\"'+file+'\"]').find('a.file-preview-btn');\n\t  if (_this.html()!=\"\" && _this.html()!==undefined){\n      $.ajax({\n          url: _this.attr('data-url'),\n          success: function(data) {\n\t\t\t\t\t\tbootbox.alert(data);\n    \t\t\t}\n      });\n\t\t}else{\n\t\t\tvar _this=$('li[data-name=\"'+file+'\"]').find('.modalAV');\n\t\t  $('#previewAV').removeData(\"modal\");\n\t\t  $('#previewAV').modal({\n\t\t\t\tbackdrop: 'static',\n\t\t\t\tkeyboard: false\n\t\t  });\n\t\t  if (_this.hasClass('audio')) {\n\t\t\t\t$(\".body-preview\").css('height','80px');\n\t\t  }else {\n\t\t\t\t$(\".body-preview\").css('height','345px');\n\t\t  }\n\n\t\t  $.ajax({\n\t\t\t\turl: decodeURIComponent(_this.attr('data-url')),\n\t\t\t\tsuccess: function(data) {\n\t\t\t  \t$(\".body-preview\").html(data);\n\t\t\t\t}\n\t\t  });\n\t\t}\n\t}\n\treturn;\n}\n\nfunction getUrlParam( paramName ) {\n    var reParam = new RegExp( '(?:[\\?&]|&)' + paramName + '=([^&]+)', 'i' ) ;\n    var match = window.location.search.match(reParam) ;\n\n    return ( match && match.length > 1 ) ? match[ 1 ] : null ;\n}\n\nfunction apply_any(url) {\n\tif ($('#crossdomain').val()==1){\n\t\twindow.parent.postMessage({\n\t\t\t\tsender: 'responsivefilemanager',\n\t\t\t\turl: url,\n\t\t\t\tfield_id : null\n\t\t\t},\n\t\t\t'*'\n\t\t);\n\n\t} else {\n\t\tvar editor = $('#editor').val();\n\t\tif(editor=='ckeditor'){\n\t\t\tvar funcNum = getUrlParam( 'CKEditorFuncNum' );\t\n\t\t\twindow.opener.CKEDITOR.tools.callFunction( funcNum, url );\n\t\t\twindow.close();\n\t\t}else{\n\t\t\t// tinymce 3.X\n\t\t\tif ( parent.tinymce.majorVersion < 4 )\n\t\t\t{\n\t\t\t\tparent.tinymce.activeEditor.windowManager.params.setUrl(url);\n\t\t\t\tparent.tinymce.activeEditor.windowManager.close( parent.tinymce.activeEditor.windowManager.params.mce_window_id );\n\t\t\t}\n\t\t\t// tinymce 4.X\n\t\t\telse\n\t\t\t{\n\t\t\t\tparent.tinymce.activeEditor.windowManager.getParams().setUrl(url);\n\t\t\t\tparent.tinymce.activeEditor.windowManager.close();\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction close_window() {\n\tif ($('#popup').val()==1){\n\t\twindow.close();\n\t}else{\n\t\tif(typeof parent.jQuery !== \"undefined\" && parent.jQuery) {\n\t\t  parent.jQuery.fancybox.close();\n\t\t}else{\n\t\t  parent.$.fancybox.close();\n\t\t}\n\t}\n}\n\nfunction apply_file_duplicate(container,name){\n    var li_container=container.parent().parent().parent().parent();\n\n    li_container.after(\"<li class='\"+li_container.attr('class')+\"' data-name='\"+li_container.attr('data-name')+\"'>\"+li_container.html()+\"</li>\");\n    var cont=li_container.next();\n    apply_file_rename(cont.find('figure'),name);\n    var form=cont.find('.download-form');\n    var new_form_id='form'+new Date().getTime();\n    form.attr('id',new_form_id);\n    form.find('.tip-right').attr('onclick',\"$('#\"+new_form_id+\"').submit();\");\n}\n\nfunction apply_file_rename(container,name) {\n    container.attr('data-name',name);\n    container.parent().attr('data-name',name);\n    container.find('h4').find('a').text(name);\n    //select link\n    var link=container.find('a.link');\n    var file=link.attr('data-file');\n    var old_name=file.substring(file.lastIndexOf('/') + 1);\n    var extension=file.substring(file.lastIndexOf('.') + 1);\n    link.each(function(){\n\t$(this).attr('data-file',encodeURIComponent(name+\".\"+extension));\n\t});\n\n    //thumbnails\n    container.find('img').each(function(){\n\t\tvar src =$(this).attr('src');\n\t\t$(this).attr('src',src.replace(old_name,name+\".\"+extension)+'?time=' + new Date().getTime());\n\t\t$(this).attr('alt',name+\" thumbnails\");\n    });\n\n    //preview link\n    var link2=container.find('a.preview');\n    var file= link2.attr('data-url');\n    if (typeof file !==\"undefined\" && file) {\n\tlink2.attr('data-url',file.replace(encodeURIComponent(old_name),encodeURIComponent(name+\".\"+extension)));\n    }\n\n    //li data-name\n    container.parent().attr('data-name',name+\".\"+extension);\n    container.attr('data-name',name+\".\"+extension);\n\n    //download link\n    container.find('.name_download').val(name+\".\"+extension);\n\n    //rename link && delete link\n    var link3=container.find('a.rename-file');\n    var link4=container.find('a.delete-file');\n    var path_old=link3.attr('data-path');\n    var path_thumb=link3.attr('data-thumb');\n    var new_path=path_old.replace(old_name,name+\".\"+extension);\n    var new_thumb=path_thumb.replace(old_name,name+\".\"+extension);\n    link3.attr('data-path',new_path);\n    link3.attr('data-thumb',new_thumb);\n    link4.attr('data-path',new_path);\n    link4.attr('data-thumb',new_thumb);\n}\n\nfunction apply_folder_rename(container,name) {\n\n    container.attr('data-name',name);\n    container.find('figure').attr('data-name',name);\n\n    var old_name=container.find('h4').find('a').text();\n    container.find('h4 > a').text(name);\n\n    //select link\n    var link=container.find('.folder-link');\n    var url=link.attr('href');\n    var fldr=$('#fldr_value').val();\n    var new_url=url.replace('fldr='+fldr+encodeURIComponent(old_name),'fldr='+fldr+encodeURIComponent(name));\n    link.each(function(){\n\t$(this).attr('href',new_url);\n    });\n\n    //rename link && delete link\n    var link2=container.find('a.delete-folder');\n    var link3=container.find('a.rename-folder');\n    var path_old=link3.attr('data-path');\n    var thumb_old=link3.attr('data-thumb');\n    var index = path_old.lastIndexOf('/');\n    var new_path = path_old.substr(0, index + 1)+name;\n    link2.attr('data-path',new_path);\n    link3.attr('data-path',new_path);\n    var index = thumb_old.lastIndexOf('/');\n    var new_path = thumb_old.substr(0, index + 1)+name;\n    link2.attr('data-thumb',new_path);\n    link3.attr('data-thumb',new_path);\n\n}\n\nfunction replace_last(str,find,replace) {\n\tvar re= new RegExp(find+\"$\");\n\treturn str.replace(re, replace);\n}\n\nfunction replaceDiacritics(s)\n{\n    var s;\n\n    var diacritics =[\n        /[\\300-\\306]/g, /[\\340-\\346]/g,  // A, a\n        /[\\310-\\313]/g, /[\\350-\\353]/g,  // E, e\n        /[\\314-\\317]/g, /[\\354-\\357]/g,  // I, i\n        /[\\322-\\330]/g, /[\\362-\\370]/g,  // O, o\n        /[\\331-\\334]/g, /[\\371-\\374]/g,  // U, u\n        /[\\321]/g, /[\\361]/g, // N, n\n        /[\\307]/g, /[\\347]/g // C, c\n    ];\n\n    var chars = ['A','a','E','e','I','i','O','o','U','u','N','n','C','c'];\n\n    for (var i = 0; i < diacritics.length; i++)\n    {\n        s = s.replace(diacritics[i],chars[i]);\n    }\n\n    return s;\n}\n\nfunction fix_filename(stri) {\n  if (stri!=null) {\n\t\tif ($('#transliteration').val()==\"true\") {\n\t\t    stri=replaceDiacritics(stri);\n\t\t    stri=stri.replace(/[^A-Za-z0-9\\.\\-\\[\\]\\ \\_]+/g, '');\n\t\t}\n\t\tif ($('#convert_spaces').val()==\"true\") {\n          stri=stri.replace(/ /g,$('#replace_with').val());\n          stri=stri.toLowerCase();\n\t  }\n\t\tstri=stri.replace('\"','');\n\t\tstri=stri.replace(\"'\",'');\n\t\tstri=stri.replace(\"/\",'');\n\t\tstri=stri.replace(\"\\\\\",'');\n\t\tstri=stri.replace(/<\\/?[^>]+(>|$)/g, \"\");\n\t\treturn $.trim(stri);\n  }\n  return null;\n}\n\nfunction execute_action(action,file1,file2,name,container,function_name){\n    if (name!==null) {\n\tname=fix_filename(name);\n\t$.ajax({\n\t    type: \"POST\",\n\t    url: \"execute.php?action=\"+action,\n\t    data: {path: file1, path_thumb: file2, name: name.replace('/','')}\n\t}).done(function( msg ) {\n\t    if (msg!=\"\") {\n\t\tbootbox.alert(msg);\n\t\treturn false;\n\t    }else {\n\t\tif (function_name!=\"\") {\n\t\t    window[function_name](container,name);\n\t\t}\n\t    }\n\t    return true;\n\t});\n    }\n}\n\n\nfunction sortUnorderedList(sortDescending,sort_field) {\n\tconsole.log(sortDescending+\" \"+sort_field);\n\tvar lis_dir = $('li.dir','ul.grid').filter(':visible');\n\tvar lis_file = $('li.file','ul.grid').filter(':visible');\n\tvar vals_dir = [];\n\tvar values_dir = [];\n\tvar vals_file = [];\n\tvar values_file = [];\n\tvar text = $('#filter-input').val();\n\tlis_dir.each(function(index){\n\t\tvar _this=$(this);\n\t\tvar value=_this.find(sort_field).val();\n\t\tif ($.isNumeric(value)) {\n\t\t    value=parseFloat(value);\n\t\t    while (typeof vals_dir[value] !== \"undefined\" &&  vals_dir[value] ) {\n\t\t\t\t\tvalue=parseFloat(parseFloat(value)+parseFloat(0.001));\n\t\t    }\n\t\t}else {\n\t\t    value=value+\"a\"+_this.find('h4 a').attr('data-file');\n\t\t}\n\t\tvals_dir[value]=_this.html();\n\t\tvalues_dir.push(value);\n\t});\n\n\tlis_file.each(function(index){\n\n\t\tvar _this=$(this);\n\t\tvar value=_this.find(sort_field).val();\n\t\tconsole.log(value);\n\t\tif ($.isNumeric(value)) {\n\t\t\tvalue=parseFloat(value);\n\t\t\twhile (typeof vals_file[value] !== \"undefined\" &&  vals_file[value] ) {\n\t\t\t\tvalue=parseFloat(parseFloat(value)+parseFloat(0.001));\n\t\t\t}\n\t\t}else {\n\t\t\tvalue=value+\"a\"+_this.find('h4 a').attr('data-file');\n\t\t}\n\t\tvals_file[value]=_this.html();\n\t\tvalues_file.push(value);\n\t});\n\n\t\tconsole.log('----------------');\n\n\tif ($.isNumeric(values_dir[0])) {\n\t\tvalues_dir.sort(function(a,b){return parseFloat(a)-parseFloat(b);});\n\t}else {\n\t\tvalues_dir.sort();\n\t}\n\n\tif ($.isNumeric(values_file[0])) {\n\t\tvalues_file.sort(function(a,b){return  parseFloat(a)-parseFloat(b); });\n\t}else {\n\t\tvalues_file.sort();\n\t}\n\n\tif (sortDescending){\n\t\tvalues_dir.reverse();\n\t\tvalues_file.reverse();\n\t}\n\n\tlis_dir.each(function(index){\n\t\tvar _this=$(this);\n\t\t_this.html(vals_dir[values_dir[index]]);\n\t});\n\n\tlis_file.each(function(index){\n\t\tvar _this=$(this);\n\t\t_this.html(vals_file[values_file[index]]);\n\t});\n}\n\nfunction show_animation()\n{\n    $('#loading_container').css('display', 'block');\n    $('#loading').css('opacity', '.7');\n}\n\nfunction hide_animation()\n{\n    $('#loading_container').fadeOut();\n}\n\nfunction launchEditor(id, src) {\n    featherEditor.launch({\n\timage: id,\n\turl: src\n    });\n   return false;\n}\n\nfunction lazyLoad() {\n    $(window).trigger(\"scroll\");\n}\n"],"sourceRoot":"/source/"}